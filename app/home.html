<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>What To Do?</title>
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Socket.io -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <!-- Bootstrap JavaScript -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <!-- Bootstrap css -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

    <!-- <link rel="stylesheet" type="text/css" href="../styles.css"> -->
    <script type="text/javascript" scr=""></script>
</head>

<ul id="todos"></ul>
<form name="form" id="form" action="">
    <div class "container">
        <div class="card">
            <article class="card-body">
                <a href="/signin" class="float-right btn btn-outline-primary">Sign Out</a>
                <h4 class="card-title text mb-4 mt-1">What To Do?</h4>
                <hr>
                <form class="form">
                    <div class="form-group">
                    <div class="input-group-center"> 
                        <h5 class="text-center">{{username}}'s To Dos</h5><br>
                        <input id="todo" class="form-control-sm " placeholder="To Do" autocomplete="off" />
                        <button type="submit" class="btn-sm btn-primary btn-block-sm">Add</button>
                    </div> <!-- input-group -->
                    </div> <!-- form-group -->
                </form>
            </article>
        </div>
    </div>
</form>

<script> 
    $(function(){
        const socket = io.connect("http://localhost:3000/");

        $('form').submit(function(){
            const todo = $('#todo').val();
            socket.emit("todos", todo);
            $('todo').val('');
            return false;
        });
    });

    //bliver kaldt nÃ¥r app laver todo
    socket.on("todos", todos => {
        console.log("todos", todos);
        const todosElement = document.getElementById("todos"); // <ul></ul>

        for (const todo of todos){
            const todoElement = document.create("li");
            todoElement.innerText = `${todo.text}`; // <li>To do</li>

            todosElement.appendChild(todoElement);
        }
    });
</script>

</html>